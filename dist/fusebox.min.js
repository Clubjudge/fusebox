/**
 *  v0.1.0
 *
 * Copyright (c) 2013Bruno Abrantes
 * Distributed under BSD License
 *
 * Documentation and full license available at:
 * http://inf0rmer.github.com/fusebox
 *
 */
(function(){var n,r,t,u,fusebox,e,i,o,l,a,s,c;return s=this,o=this.fusebox,r={},e={},i={},c={},n="widgets/",l=require,a=requirejs,t=function(n,r){return null==r&&(r="_"),n.replace(/([A-Z])/g,r+"$1").toLowerCase()},i.extend=function(n){return c=_.extend(c,n)},i.clear=function(){return c={}},i.validate=function(n,r){var t,u;return t=null!=(u=c[r])?u[n]:void 0,t?!0:!1},e.subscribe=function(n,t,u,e){return r[t]=null!=r[t]?r[t]:{},r[t][n]=null!=r[t][n]?r[t][n]:[],r[t][n].push(_.bind(u,e))},e.unsubscribe=function(n){return r[n]=[]},e.publish=function(n,t){var u;return u=[].slice.call(arguments,1),r[t]?r[t][n]&&r[t][n].length?_.each(r[t][n],function(n){return n.apply(this,u)}):void 0:void 0},e.start=function(u){var i,o;return i=[].slice.call(arguments,1),o=t(u),l([n+o+"/main"],function(){return _.each(r[u].bootstrap,function(n){return n.apply(e,i)})})},e.stop=function(n){var r,u,i;return r=[].slice.call(arguments,1),u=r[0],i=t(n),e.publish.apply(e,["unload",n].concat(r)),u?$(u).html(""):void 0},e.unload=function(n){var r,t,u,e,i;if(r=null!=(null!=a?a.s.contexts._.urlMap:void 0)){for(i=[],u=0,e=r.length;e>u;u++)t=r[u],r.hasOwnProperty(t)&&-1!==t.indexOf(n)?i.push(l.undef(t)):i.push(void 0);return i}},e.dom={find:function(n,r){return null==r&&(r=document),$(r).find(n)},data:function(n,r){return $(n).data(r)}},fusebox={noConflict:function(){return s.fusebox=o,fusebox},subscribe:function(n,r,t){return i.validate(n,r)?e.subscribe(n,r,t,this):void 0},publish:function(){return e.publish.apply(e,arguments)},start:function(){return e.start.apply(e,arguments)},stop:function(){return e.stop.apply(e,arguments)},unload:function(){var r;return r=t(channel),e.unload.apply(n+r)},find:function(n,r){return e.dom.find(n,r)},data:function(n,r){return e.dom.data(n,r)},permissions:i,dom:e.dom,setBaseUrl:function(r){return n=r},getBaseUrl:function(){return n},setRequireLib:function(n,r){if(2>arguments.length)throw Error("Both a require function and a requirejs global are needed");if("function"!=typeof n)throw Error("require needs to be a function");return l=n,a=r},getRequireLib:function(){return{require:l,requirejs:a}}},u!==void 0&&null!==u?(null!=("undefined"!=typeof module&&null!==module?module.exports:void 0)&&(u=module.exports=fusebox),u.fusebox=fusebox):s.fusebox=fusebox,fusebox})();