/**
 *  v0.1.0
 *
 * Copyright (c) 2013Bruno Abrantes
 * Distributed under BSD License
 *
 * Documentation and full license available at:
 * http://inf0rmer.github.com/fusebox
 *
 */
(function(){var n,u,r,t,fusebox,e,o,i,l,a,s,c;return s=this,i=this.fusebox,u={},e={},o={},c={},n="widgets/",l=require,a=requirejs,r=function(n,u){return null==u&&(u="_"),n.replace(/([A-Z])/g,u+"$1").toLowerCase()},o.extend=function(n){return c=_.extend(c,n)},o.clear=function(){return c={}},o.validate=function(n,u){var r,t;return r=null!=(t=c[u])?t[n]:void 0,r?!0:!1},e.subscribe=function(n,r,t,e){return u[r]=null!=u[r]?u[r]:{},u[r][n]=null!=u[r][n]?u[r][n]:[],u[r][n].push(_.bind(t,e))},e.unsubscribe=function(n){return u[n]=[]},e.publish=function(n,r){var t;return t=[].slice.call(arguments,1),u[r]?u[r][n]&&u[r][n].length?_.each(u[r][n],function(n){return n.apply(this,t)}):void 0:void 0},e.start=function(t){var o,i;return o=[].slice.call(arguments,1),i=r(t),l([n+i+"/main"],function(){var n;return null!=(null!=(n=u[t])?n.bootstrap:void 0)?_.each(u[t].bootstrap,function(n){return n.apply(e,o)}):void 0})},e.stop=function(n){var t,o,i,l;return t=[].slice.call(arguments,1),o=t[0],i=r(n),null!=(null!=(l=u[n])?l.unload:void 0)&&e.publish.apply(e,["unload",n].concat(t)),o?$(o).html(""):void 0},e.unload=function(n){var u,r,t,e,o;if(u=null!=(null!=a?a.s.contexts._.urlMap:void 0)){for(o=[],t=0,e=u.length;e>t;t++)r=u[t],u.hasOwnProperty(r)&&-1!==r.indexOf(n)?o.push(l.undef(r)):o.push(void 0);return o}},e.dom={find:function(n,u){return null==u&&(u=document),$(u).find(n)},data:function(n,u){return $(n).data(u)}},fusebox={noConflict:function(){return s.fusebox=i,fusebox},subscribe:function(n,u,r){return o.validate(n,u)?e.subscribe(n,u,r,this):void 0},publish:function(){return e.publish.apply(e,arguments)},start:function(){return e.start.apply(e,arguments)},stop:function(){return e.stop.apply(e,arguments)},unload:function(){var u;return u=r(channel),e.unload.apply(n+u)},find:function(n,u){return e.dom.find(n,u)},data:function(n,u){return e.dom.data(n,u)},permissions:o,dom:e.dom,setBaseUrl:function(u){return n=u},getBaseUrl:function(){return n},setRequireLib:function(n,u){if(2>arguments.length)throw Error("Both a require function and a requirejs global are needed");if("function"!=typeof n)throw Error("require needs to be a function");return l=n,a=u},getRequireLib:function(){return{require:l,requirejs:a}}},t!==void 0&&null!==t?(null!=("undefined"!=typeof module&&null!==module?module.exports:void 0)&&(t=module.exports=fusebox),t.fusebox=fusebox):s.fusebox=fusebox,fusebox})();