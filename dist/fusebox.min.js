/**
 *  v0.0.0
 *
 * Copyright (c) 2013Bruno Abrantes
 * Distributed under BSD License
 *
 * Documentation and full license available at:
 * http://inf0rmer.github.com/fusebox
 *
 */
(function(){var n,r,e,t,fusebox,u,i,o,a,l;return a=this,o=this.fusebox,r={},u={},i={},l={},n="widgets/",e=function(n,r){return null==r&&(r="_"),n.replace(/([A-Z])/g,r+"$1").toLowerCase()},i.extend=function(n){return l=_.extend(l,n)},i.clear=function(){return l={}},i.validate=function(n,r){var e,t;return e=null!=(t=l[r])?t[n]:void 0,e?!0:!1},u.subscribe=function(n,e,t,u){return r[e]=null!=r[e]?r[e]:{},r[e][n]=null!=r[e][n]?r[e][n]:[],r[e][n].push(_.bind(t,u))},u.unsubscribe=function(n){return r[n]=[]},u.publish=function(n,e){var t;return t=[].slice.call(arguments,1),r[e]?r[e][n]&&r[e][n].length?_.each(r[e][n],function(n){return n.apply(this,t)}):void 0:void 0},u.start=function(t){var i,o;return i=[].slice.call(arguments,1),o=e(t),req([n+o+"/main"],function(){return _.each(r[t].bootstrap,function(n){return n.apply(u,i)})})},u.stop=function(n){var r,t,i;return r=[].slice.call(arguments,1),t=r[0],i=e(n),u.publish.apply(u,["unload",n].concat(r)),t?$(t).html(""):void 0},u.unload=function(n){var r,e,t,u,i;if(r=null!=("undefined"!=typeof reqjs&&null!==reqjs?reqjs.s.contexts._.urlMap:void 0)){for(i=[],t=0,u=r.length;u>t;t++)e=r[t],r.hasOwnProperty(e)&&-1!==e.indexOf(n)?i.push(req.undef(e)):i.push(void 0);return i}},u.dom={find:function(n,r){return null==r&&(r=document),$(r).find(n)},data:function(n,r){return $(n).data(r)}},fusebox={noConflict:function(){return a.fusebox=o,fusebox},subscribe:function(n,r,e){return i.validate(n,r)?u.subscribe(n,r,e,this):void 0},publish:function(){return u.publish.apply(u,arguments)},start:function(){return u.start.apply(u,arguments)},stop:function(){return u.stop.apply(u,arguments)},unload:function(){var r;return r=e(channel),u.unload.apply(n+r)},find:function(n,r){return u.dom.find(n,r)},data:function(n,r){return u.dom.data(n,r)},permissions:i,dom:u.dom,setBaseUrl:function(r){return n=r},getBaseUrl:function(){return n},setRequireLib:function(n,r){var e,t;if(2>arguments.length)throw Error("Both a require function and a requirejs global are needed");if("function"!=typeof n)throw Error("require needs to be a function");return e=n,t=r},getRequireLib:function(){return{require:require,requirejs:requirejs}}},t!==void 0&&null!==t?(null!=("undefined"!=typeof module&&null!==module?module.exports:void 0)&&(t=module.exports=fusebox),t.fusebox=fusebox):a.fusebox=fusebox,fusebox})();